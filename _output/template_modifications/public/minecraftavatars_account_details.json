{
    "template": "account_details",
    "description": "Adding Minecraft related fields (username, checkbox for using skin as avatar)",
    "execution_order": 10,
    "enabled": true,
    "action": "str_replace",
    "find": "<xf:editorrow name=\"about\" value=\"{$xf.visitor.Profile.about_}\" previewable=\"0\"\n\t\t\t\t\tmaxlength=\"{{ max_length($xf.visitor.Profile, 'about') }}\"\n\t\t\t\t\tlabel=\"{{ phrase('about_you') }}\"/>\n\t\t\t</xf:if>\n\t\t</div>",
    "replace": "$0\n\n<h2 class=\"block-formSectionHeader\"><span class=\"block-formSectionHeader-aligner\">{{ phrase('minecraftavatars_account_details_h2') }}</span></h2>\n<div class=\"block-body\">\n\t\n\t<!-- Minecraft username textbox -->\n\t<xf:textboxrow name=\"minecraftavatars[username]\" value=\"{$xf.visitor.minecraftavatars_username}\"\n\t\t\t\t   maxlength=\"20\"\n\t\t\t\t   class=\"minecraftavatars_username\"\n\t\t\t\t   label=\"{{ phrase('minecraftavatars_account_details_username') }}\"\n\t\t\t\t   explain=\"{{ phrase('minecraftavatars_account_details_username_explanation') }}\" />\n\t\n\t<!-- Use skin head as avatar -->\n\t<xf:checkboxrow>\n\t\t<xf:option name=\"minecraftavatars[use_head_as_avatar]\" checked=\"{$xf.visitor.minecraftavatars_use_skin}\"\n\t\t\t\tclass=\"minecraftavatars_use_skin_checkbox\"\n\t\t\t\t   label=\"{{ phrase('minecraftavatars_account_details_is_using_minecraft_avatar_label') }}\">\n\t\t</xf:option>\n\t</xf:checkboxrow>\n\t\n\t<!-- Reload skin -->\n\t<xf:if is=\"{$xf.visitor.minecraftavatars_username}\">\n\t\t<xf:formrow explain=\"{{ phrase('minecraftavatars_account_reload_skin_explain') }}\">\n\t\t\t<xf:button data-follow-redirects=\"true\" data-force-flash-message=\"true\" href=\"{{ link('account/reloadSkinHead') }}\" class=\"button--link\">{{ phrase('minecraftavatars_account_reload_skin') }}</xf:button>\n\t\t</xf:formrow>\n\t</xf:if>\n</div>\n\n<script>\n\twindow.onload = function() {\n\t\t\n\t\tvar minecraftavatars_input = jQuery('.minecraftavatars_username');\n\t\tvar minecraftavatars_checkbox = jQuery('.minecraftavatars_use_skin_checkbox');\n\t\t\n\t\tvar minecraftavatars_checkbox_disable = function(username) {\n\t\t\tif(username.length === 0) {\n\t\t\t\tminecraftavatars_checkbox.prop('disabled', true);\n\t\t\t} else {\n\t\t\t\tminecraftavatars_checkbox.prop('disabled', false);\n\t\t\t}\n\t\t};\n\t\t\n\t\tif(minecraftavatars_input.val().length === 0) {\n\t\t\tminecraftavatars_checkbox.prop('disabled', true);\n\t\t}\n\t\t\n    \tminecraftavatars_input.on('change input', function(e) {\n\t\t\tminecraftavatars_checkbox_disable(jQuery(this).val());\n\t\t});\n\t\t\n  \t};\n</script>"
}